---
description: "integrated spec-driven development"
---

Claude Codeを用いた統合型spec-driven developmentを行います。要件定義、設計、実装計画を一つのspecファイルにまとめて作成し、確認後に実装を開始します。

## integrated spec-driven development とは

要件定義、設計、実装計画を統合した単一のspecファイルを作成し、それをレビュー後に実装を開始する開発手法です。

### フェーズ1: 準備と統合spec作成

#### 準備
- ユーザーがClaude Codeに対して、実行したいタスクの概要を伝える
- タスクの概要から適切な spec 名を考えてそれをslugとします
    - 例：「記事コンポーネントを作成する」→ `create-article-component`
- git branch をデフォルトブランチ（殆どの場合 `main`）にしてremoteからpullして同期
- `git checkout -b {type}/{slug}` としてbranchを作成
  - `type` は `feat`, `fix`, `refactor`, `perf`, `style`, `docs`, `test`, `ci`, `build`, `chore`, `revert` から選択
  - 例： `feat/create-article-component`

#### 統合specファイルの作成
- ディレクトリ `.cckiro/specs/{slug}` を作成（例： `.cckiro/specs/create-article-component`）
- `.cckiro/specs/{slug}/spec.md` として統合specファイルを作成
- このファイルには以下の3つのセクションを含める：

```markdown
# {タスク名} Specification

## 1. 要件定義 (Requirements)

### 概要
[タスクの概要と目的]

### 機能要件
- [要件1]
- [要件2]
- ...

### 非機能要件
- [パフォーマンス要件]
- [セキュリティ要件]
- ...

### 制約事項
- [技術的制約]
- [ビジネス制約]
- ...

## 2. 設計 (Design)

### アーキテクチャ概要
[システムの全体的な設計方針]

### コンポーネント設計
[各コンポーネントの責務と相互作用]

### データフロー
[データの流れと処理]

### インターフェース設計
[API、UI、その他のインターフェース仕様]

### エラーハンドリング
[エラー処理の方針]

## 3. 実装計画 (Implementation Plan)

### 影響を受けるファイル
- 新規作成:
  - [ ] `path/to/new-file1.ext`
  - [ ] `path/to/new-file2.ext`
- 修正:
  - [ ] `path/to/existing-file1.ext`
  - [ ] `path/to/existing-file2.ext`
- 削除:
  - [ ] `path/to/delete-file.ext`

### 実装ステップ
- [ ] **Step 1**: [ステップの説明]
  - 詳細な作業内容
  - 影響するファイル
- [ ] **Step 2**: [ステップの説明]
  - 詳細な作業内容
  - 影響するファイル
- [ ] **Step 3**: [ステップの説明]
  - 詳細な作業内容
  - 影響するファイル
...

### テスト計画
- [ ] ユニットテストの作成/更新
- [ ] 統合テストの作成/更新
- [ ] 動作確認手順

### リリース準備
- [ ] ドキュメントの更新
- [ ] 設定ファイルの更新
- [ ] マイグレーション（必要な場合）
```

### フェーズ2: レビューと修正

- Claude Codeがユーザーに対して統合specファイルを提示
- ユーザーが内容を確認し、以下の観点でレビュー：
  - 要件の網羅性と正確性
  - 設計の妥当性と実現可能性
  - 実装計画の現実性と完全性
- 問題があればフィードバックを受けて修正
- ユーザーが承認するまで修正を繰り返す

### フェーズ3: 実装

- ユーザーの明示的な承認後、実装を開始
- `.cckiro/specs/{slug}/spec.md` の実装計画に基づいて実装
- 実装の進捗に応じてチェックボックス `[ ]` を `[x]` に更新
- 必要に応じてspecファイルも実態に合わせて更新
- 実装中の変更や追加要件があれば、specファイルの該当セクションも更新

## 利点

- **一元管理**: 要件、設計、実装計画が1つのファイルにまとまっているため、参照と管理が容易
- **効率性**: フェーズ間の待ち時間を削減し、レビューを一度に実施可能
- **整合性**: すべての情報が同じファイルにあるため、要件と設計、実装の整合性を保ちやすい
- **迅速な開始**: 承認後すぐに実装を開始できる

## 注意事項

- specファイルは常に最新の状態を反映するように更新する
- 実装中に発見した問題や変更は、specファイルにも反映する
- 大規模な変更が必要な場合は、ユーザーに確認を取る